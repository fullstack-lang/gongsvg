<svg *ngIf="nbControlPoints == 0 && this.Link && (!isFloatingOrthogonal)" class="svg">
    <g>
        <line class="overlay" 
            [attr.x1]="getPosition(Link.Start, Link.StartAnchorType)[0]" 
            [attr.y1]="getPosition(Link.Start, Link.StartAnchorType)[1]" 
            [attr.x2]="getPosition(Link.End, Link.EndAnchorType)[0]" 
            [attr.y2]="getPosition(Link.End, Link.EndAnchorType)[1]"
            [attr.fill]="Link.Color"
            [attr.fill-opacity]="Link.FillOpacity" 
            [attr.stroke]="Link.Stroke" 
            [attr.stroke-width]="Link.StrokeWidth"
            [attr.stroke-dasharray]="Link.StrokeDashArray" 
            [attr.transform]="Link.Transform" 
            
            (mousedown)="linkMouseDown($event)" 
            (mousemove)="linkMouseMove($event)" 
            (mouseup)="linkMouseUp($event)"
            
            />
    </g>
</svg>

<svg *ngIf="nbControlPoints > 0 && this.Link && this.Link.ControlPoints" class="svg">
    <g>
        <line class="overlay" 
            [attr.x1]="getPosition(Link.Start, Link.StartAnchorType)[0]" 
            [attr.y1]="getPosition(Link.Start, Link.StartAnchorType)[1]" 
            [attr.x2]="Link.ControlPoints[0].X" 
            [attr.y2]="Link.ControlPoints[0].Y"
            [attr.fill]="Link.Color"
            [attr.fill-opacity]="Link.FillOpacity" 
            [attr.stroke]="Link.Stroke" 
            [attr.stroke-width]="Link.StrokeWidth"
            [attr.stroke-dasharray]="Link.StrokeDashArray" 
            [attr.transform]="Link.Transform" 
            
            (mousedown)="linkMouseDown($event)" 
            />

        <line class="overlay" 
            [attr.x1]="Link.ControlPoints[nbControlPoints-1].X" 
            [attr.y1]="Link.ControlPoints[nbControlPoints-1].Y"
            [attr.x2]="getPosition(Link.End, Link.EndAnchorType)[0]" 
            [attr.y2]="getPosition(Link.End, Link.EndAnchorType)[1]" 
            [attr.fill]="Link.Color"
            [attr.fill-opacity]="Link.FillOpacity" 
            [attr.stroke]="Link.Stroke" 
            [attr.stroke-width]="Link.StrokeWidth"
            [attr.stroke-dasharray]="Link.StrokeDashArray" 
            [attr.transform]="Link.Transform"

            (mousedown)="linkMouseDown($event)" 
            />
    </g>
</svg>

<svg *ngIf="nbControlPoints > 0 && this.Link && this.Link.ControlPoints" class="svg">
    <svg *ngFor="let item of [].constructor(nbControlPoints-1); let i = index">
    <g>
        <line class="overlay" 
            [attr.x1]="Link.ControlPoints[i].X" 
            [attr.y1]="Link.ControlPoints[i].Y"
            [attr.x2]="Link.ControlPoints[i+1].X" 
            [attr.y2]="Link.ControlPoints[i+1].Y"
            [attr.fill]="Link.Color"
            [attr.fill-opacity]="Link.FillOpacity" 
            [attr.stroke]="Link.Stroke" 
            [attr.stroke-width]="Link.StrokeWidth"
            [attr.stroke-dasharray]="Link.StrokeDashArray" 
            [attr.transform]="Link.Transform" 

            (mousedown)="linkMouseDown($event)" 
            />
    </g>
    </svg>
</svg>

<svg *ngIf="isFloatingOrthogonal && Link && drawConnector() && points" class="svg">
    <g>
        <line class="overlay" 
            [attr.x1]="points[0][0].X" 
            [attr.y1]="points[0][0].Y" 
            [attr.x2]="points[0][1].X" 
            [attr.y2]="points[0][1].Y"
            [attr.fill]="Link.Color"
            [attr.fill-opacity]="Link.FillOpacity" 
            [attr.stroke]="Link.Stroke" 
            [attr.stroke-width]="Link.StrokeWidth"
            [attr.stroke-dasharray]="Link.StrokeDashArray" 
            
            (mousedown)="linkMouseDown($event)" 
            (mousemove)="linkMouseMove($event)" 
            (mouseup)="linkMouseUp($event)"
            
            />

        <!-- <circle class="overlay" 
            [attr.r]="10" 
            [attr.cx]="points[0][1].X" 
            [attr.cy]="points[0][1].Y"
            [attr.fill]="Link.Color"
            [attr.fill-opacity]="Link.FillOpacity" 
            [attr.stroke]="Link.Stroke" 
            [attr.stroke-width]="Link.StrokeWidth"
            [attr.stroke-dasharray]="Link.StrokeDashArray" 
            
            (mousedown)="linkMouseDown($event)" 
            (mousemove)="linkMouseMove($event)" 
            (mouseup)="linkMouseUp($event)"
            
            /> -->

        <!-- <circle class="overlay" 
            [attr.r]="20" 
            [attr.cx]="points[0][0].X" 
            [attr.cy]="points[0][0].Y"
            [attr.fill]="Link.Color"
            [attr.fill-opacity]="Link.FillOpacity" 
            [attr.stroke]="Link.Stroke" 
            [attr.stroke-width]="Link.StrokeWidth"
            [attr.stroke-dasharray]="Link.StrokeDashArray" 
            
            (mousedown)="linkMouseDown($event)" 
            (mousemove)="linkMouseMove($event)" 
            (mouseup)="linkMouseUp($event)"
            
            /> -->

                 <!-- <circle class="overlay" 
            [attr.r]="15" 
            [attr.cx]="points[1][1].X" 
            [attr.cy]="points[1][1].Y"
            [attr.fill]="Link.Color"
            [attr.fill-opacity]="Link.FillOpacity" 
            [attr.stroke]="Link.Stroke" 
            [attr.stroke-width]="Link.StrokeWidth"
            [attr.stroke-dasharray]="Link.StrokeDashArray" 
            
            (mousedown)="linkMouseDown($event)" 
            (mousemove)="linkMouseMove($event)" 
            (mouseup)="linkMouseUp($event)"
            
            /> -->
<!-- 
        <circle class="overlay" 
            [attr.r]="25" 
            [attr.cx]="points[1][0].X" 
            [attr.cy]="points[1][0].Y"
            [attr.fill]="Link.Color"
            [attr.fill-opacity]="Link.FillOpacity" 
            [attr.stroke]="Link.Stroke" 
            [attr.stroke-width]="Link.StrokeWidth"
            [attr.stroke-dasharray]="Link.StrokeDashArray" 
            
            (mousedown)="linkMouseDown($event)" 
            (mousemove)="linkMouseMove($event)" 
            (mouseup)="linkMouseUp($event)"
            
            /> -->
        <line class="overlay" 
            [attr.x1]="points[1][0].X" 
            [attr.y1]="points[1][0].Y" 
            [attr.x2]="points[1][1].X" 
            [attr.y2]="points[1][1].Y"
            [attr.fill]="Link.Color"
            [attr.fill-opacity]="Link.FillOpacity" 
            [attr.stroke]="Link.Stroke" 
            [attr.stroke-width]="Link.StrokeWidth"
            [attr.stroke-dasharray]="Link.StrokeDashArray" 
            
            (mousedown)="linkMouseDown($event)" 
            (mousemove)="linkMouseMove($event)" 
            (mouseup)="linkMouseUp($event)"
            
            />
    </g>
</svg>