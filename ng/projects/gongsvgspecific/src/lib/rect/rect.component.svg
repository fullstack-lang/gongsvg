<!-- <svg class="child" (click)="onSVGClick($event)" > -->
<svg>
    <g>
        <rect 
            class="overlay" 
            (click)="onRectClick($event)" 
            [attr.x]="Rect.X" [attr.y]="Rect.Y" 
            [attr.width]="Rect.Width" 
            [attr.height]="Rect.Height" 
            [attr.rx]="Rect.RX" 
            [attr.fill]="Rect.Color"
            [attr.fill-opacity]="Rect.FillOpacity" 
            [attr.stroke]="Rect.Stroke" 
            [attr.stroke-width]="Rect.StrokeWidth"
            [attr.stroke-dasharray]="Rect.IsSelected ? Rect.StrokeDashArrayWhenSelected : Rect.StrokeDashArray" 
            [attr.transform]="Rect.Transform"
            
            (mousedown)="startRectDrag($event)" 
            (mousemove)="dragRect($event)" 
            (mouseup)="endRectDrag($event)"
            >

            <animate *ngFor="let animate of Rect.Animations" 
            [attr.attributeName]="animate.AttributeName" 
            [attr.values]="animate.Values" 
            [attr.dur]="animate.Dur" 
            [attr.repeatCount]="animate.RepeatCount" />

        </rect>

        <!-- Left anchor -->
        <circle class="overlay" *ngIf="Rect.HasLeftHandle"
        [attr.cx]="Rect.X"
         [attr.cy]="Rect.Y + Rect.Height / 2" 
         [attr.r]="anchorRadius" 
         [attr.fill]="(anchorDragging && activeAnchor === 'left') ? draggingAnchorFillColor : anchorFillColor"

         (mousedown)="startAnchorDrag($event, 'left')" (mousemove)="anchorDrag($event, 'left')" (mouseup)="endAnchorDrag($event)" (mouseleave)="endAnchorDrag($event)"
         />

        <!-- Right anchor -->
        <circle class="overlay" *ngIf="Rect.HasRightHandle"
        [attr.cx]="Rect.X+ Rect.Width"
         [attr.cy]="Rect.Y+ Rect.Height/2" 
         [attr.r]="anchorRadius"
         [attr.fill]="(anchorDragging && activeAnchor === 'right') ? draggingAnchorFillColor : anchorFillColor"

         (mousedown)="startAnchorDrag($event, 'right')" (mousemove)="anchorDrag($event, 'right')" (mouseup)="endAnchorDrag($event)" (mouseleave)="endAnchorDrag($event)"
         />

        <!-- Top anchor -->
        <circle class="overlay" *ngIf="Rect.HasTopHandle"
        [attr.cx]="Rect.X + Rect.Width / 2"
         [attr.cy]="Rect.Y " 
         [attr.r]="anchorRadius" 
         [attr.fill]="(anchorDragging && activeAnchor === 'top') ? draggingAnchorFillColor : anchorFillColor"

         (mousedown)="startAnchorDrag($event, 'top')" (mousemove)="anchorDrag($event, 'top')" (mouseup)="endAnchorDrag($event)" (mouseleave)="endAnchorDrag($event)"
         />

        <!-- Bottom anchor -->
        <circle class="overlay" *ngIf="Rect.HasBottomHandle"
        [attr.cx]="Rect.X+ Rect.Width / 2"
         [attr.cy]="Rect.Y+ Rect.Height" 
         [attr.r]="anchorRadius"
         [attr.fill]="(anchorDragging && activeAnchor === 'bottom') ? draggingAnchorFillColor : anchorFillColor"

         (mousedown)="startAnchorDrag($event, 'bottom')" (mousemove)="anchorDrag($event, 'bottom')" (mouseup)="endAnchorDrag($event)" (mouseleave)="endAnchorDrag($event)"
         />



    </g>
</svg>