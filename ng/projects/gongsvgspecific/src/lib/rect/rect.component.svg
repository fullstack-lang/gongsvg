<svg class="child">
    <g>
        <rect class="overlay" (click)="onClick($event)" 
            [attr.x]="Rect?.X" [attr.y]="Rect?.Y" [attr.width]="Rect?.Width" [attr.height]="Rect?.Height" [attr.rx]="Rect?.RX" [attr.fill]="Rect?.Color"
            [attr.fill-opacity]="Rect?.FillOpacity" [attr.stroke]="Rect?.Stroke" [attr.stroke-width]="Rect?.StrokeWidth"
            [attr.stroke-dasharray]="Rect?.StrokeDashArray" [attr.transform]="Rect?.Transform"
            
            (mousedown)="startRectDrag($event)" (mousemove)="dragRect($event)" (mouseup)="endRectDrag($event)" (mouseleave)="endDrag()"
            >

            <animate *ngFor="let animate of Rect?.Animations" 
            [attr.attributeName]="animate.AttributeName" 
            [attr.values]="animate.Values" 
            [attr.dur]="animate.Dur" 
            [attr.repeatCount]="animate.RepeatCount" />

            
        </rect>

        <!-- Left anchor -->
        <circle class="overlay" *ngIf="Rect?.HasHorizontalHandles"
        [attr.cx]="(Rect?.X) ?? 0"
         [attr.cy]="(Rect?.Y ?? 0) + (Rect?.Height ?? 0) / 2" 
         [attr.r]="anchorRadius" 
         [attr.fill]="(anchorDragging && activeAnchor === 'left') ? draggingAnchorFillColor : anchorFillColor"

         (mousedown)="startDrag($event, 'left')" (mousemove)="drag($event, 'left')" (mouseup)="endDrag()" (mouseleave)="endDrag()"
         />

        <!-- Right anchor -->
        <circle class="overlay" *ngIf="Rect?.HasHorizontalHandles"
        [attr.cx]="(Rect?.X ?? 0) + (Rect?.Width ?? 0)"
         [attr.cy]="(Rect?.Y ?? 0) + (Rect?.Height ?? 0) / 2" 
         [attr.r]="anchorRadius"
         [attr.fill]="(anchorDragging && activeAnchor === 'right') ? draggingAnchorFillColor : anchorFillColor"

         (mousedown)="startDrag($event, 'right')" (mousemove)="drag($event, 'right')" (mouseup)="endDrag()" (mouseleave)="endDrag()"
         />

        <!-- Right anchor -->

    </g>
</svg>